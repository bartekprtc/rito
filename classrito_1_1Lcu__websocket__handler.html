<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Rito: rito::Lcu_websocket_handler Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Rito
   &#160;<span id="projectnumber">0.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacerito.html">rito</a></li><li class="navelem"><a class="el" href="classrito_1_1Lcu__websocket__handler.html">Lcu_websocket_handler</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classrito_1_1Lcu__websocket__handler-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">rito::Lcu_websocket_handler Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Handler for websocket communication with LCU (League of Legends client).  
 <a href="classrito_1_1Lcu__websocket__handler.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="lcu__websocket__handler_8h_source.html">lcu_websocket_handler.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a1c56976b4fca8f90a52f8cb0da415b15"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrito_1_1Lcu__websocket__handler.html#a1c56976b4fca8f90a52f8cb0da415b15">run</a> () noexcept</td></tr>
<tr class="memdesc:a1c56976b4fca8f90a52f8cb0da415b15"><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts internal polling loop. Will not return unless <a class="el" href="classrito_1_1Lcu__websocket__handler.html#a452edaee138c5ea31fdecffc87fb6463" title="Stops internal loop. Drops LCU connection (if such connection was established).">stop()</a> is called from another thread.  <a href="classrito_1_1Lcu__websocket__handler.html#a1c56976b4fca8f90a52f8cb0da415b15">More...</a><br /></td></tr>
<tr class="separator:a1c56976b4fca8f90a52f8cb0da415b15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a452edaee138c5ea31fdecffc87fb6463"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrito_1_1Lcu__websocket__handler.html#a452edaee138c5ea31fdecffc87fb6463">stop</a> () noexcept</td></tr>
<tr class="memdesc:a452edaee138c5ea31fdecffc87fb6463"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stops internal loop. Drops LCU connection (if such connection was established).  <a href="classrito_1_1Lcu__websocket__handler.html#a452edaee138c5ea31fdecffc87fb6463">More...</a><br /></td></tr>
<tr class="separator:a452edaee138c5ea31fdecffc87fb6463"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb2a39aa671ad9a85cc390dc762a114c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrito_1_1Lcu__websocket__handler.html#abb2a39aa671ad9a85cc390dc762a114c">register_message_callback</a> (<a class="el" href="namespacerito.html#aedd3c87d4ecf0d3c6c3f7df3865b9014">Message_callback</a> on_message_received) noexcept</td></tr>
<tr class="memdesc:abb2a39aa671ad9a85cc390dc762a114c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Registers callback function for message received event.  <a href="classrito_1_1Lcu__websocket__handler.html#abb2a39aa671ad9a85cc390dc762a114c">More...</a><br /></td></tr>
<tr class="separator:abb2a39aa671ad9a85cc390dc762a114c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e3171ae9c3af8deb53ce8c056cd20a1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrito_1_1Lcu__websocket__handler.html#a8e3171ae9c3af8deb53ce8c056cd20a1">register_on_connected_callback</a> (<a class="el" href="namespacerito.html#a1778ee7a785dccf226a5dc2f28a46ccb">Connection_callback</a> on_connected) noexcept</td></tr>
<tr class="memdesc:a8e3171ae9c3af8deb53ce8c056cd20a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Registers callback function for LCU connected event.  <a href="classrito_1_1Lcu__websocket__handler.html#a8e3171ae9c3af8deb53ce8c056cd20a1">More...</a><br /></td></tr>
<tr class="separator:a8e3171ae9c3af8deb53ce8c056cd20a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6dc6553d33b19d2a14b7106f298137ef"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrito_1_1Lcu__websocket__handler.html#a6dc6553d33b19d2a14b7106f298137ef">register_on_disconnected_callback</a> (<a class="el" href="namespacerito.html#a1778ee7a785dccf226a5dc2f28a46ccb">Connection_callback</a> on_disconnected) noexcept</td></tr>
<tr class="memdesc:a6dc6553d33b19d2a14b7106f298137ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Registers callback function for LCU disconnected event.  <a href="classrito_1_1Lcu__websocket__handler.html#a6dc6553d33b19d2a14b7106f298137ef">More...</a><br /></td></tr>
<tr class="separator:a6dc6553d33b19d2a14b7106f298137ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a970b9d4977376c471eab08a33dcdee61"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classrito_1_1Lcu__websocket__handler.html#a970b9d4977376c471eab08a33dcdee61">send_message</a> (std::string_view message) noexcept</td></tr>
<tr class="memdesc:a970b9d4977376c471eab08a33dcdee61"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends message over websocket to LCU.  <a href="classrito_1_1Lcu__websocket__handler.html#a970b9d4977376c471eab08a33dcdee61">More...</a><br /></td></tr>
<tr class="separator:a970b9d4977376c471eab08a33dcdee61"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Handler for websocket communication with LCU (League of Legends client). </p>
<p>Handles websocket (duplex) connection to LCU. Automatically maintains connection and reconnects if necessary. Offers subscription for three event types:</p><ul>
<li>Connected to LCU</li>
<li>Disconnected from LCU</li>
<li>Message (event) received</li>
</ul>
<p>This class requires at least two threads: one for running the internal loop by calling <a class="el" href="classrito_1_1Lcu__websocket__handler.html#a1c56976b4fca8f90a52f8cb0da415b15" title="Starts internal polling loop. Will not return unless stop() is called from another thread.">run()</a> and the other one for sending messages (via <a class="el" href="classrito_1_1Lcu__websocket__handler.html#a970b9d4977376c471eab08a33dcdee61" title="Sends message over websocket to LCU.">send_message()</a>) and stopping the loop (via <a class="el" href="classrito_1_1Lcu__websocket__handler.html#a452edaee138c5ea31fdecffc87fb6463" title="Stops internal loop. Drops LCU connection (if such connection was established).">stop()</a>) if necessary. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="abb2a39aa671ad9a85cc390dc762a114c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb2a39aa671ad9a85cc390dc762a114c">&#9670;&nbsp;</a></span>register_message_callback()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void rito::Lcu_websocket_handler::register_message_callback </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacerito.html#aedd3c87d4ecf0d3c6c3f7df3865b9014">Message_callback</a>&#160;</td>
          <td class="paramname"><em>on_message_received</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Registers callback function for message received event. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">on_message_received</td><td>- callback function.</td></tr>
  </table>
  </dd>
</dl>
<p>Registers callback function for message received. Once callback function is registered, LCU is connected and <a class="el" href="classrito_1_1Lcu__websocket__handler.html#a1c56976b4fca8f90a52f8cb0da415b15" title="Starts internal polling loop. Will not return unless stop() is called from another thread.">run()</a> method is called, registered callback will be called every time message is received over websocket. Message contents will be passed as parameter to registered callback function. Callback is called from the same thread that called <a class="el" href="classrito_1_1Lcu__websocket__handler.html#a1c56976b4fca8f90a52f8cb0da415b15" title="Starts internal polling loop. Will not return unless stop() is called from another thread.">run()</a>.</p>
<p>Registered callback should be non-blocking and should take as little time to execute as possible, as it will be called synchronously. </p>

</div>
</div>
<a id="a8e3171ae9c3af8deb53ce8c056cd20a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e3171ae9c3af8deb53ce8c056cd20a1">&#9670;&nbsp;</a></span>register_on_connected_callback()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void rito::Lcu_websocket_handler::register_on_connected_callback </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacerito.html#a1778ee7a785dccf226a5dc2f28a46ccb">Connection_callback</a>&#160;</td>
          <td class="paramname"><em>on_connected</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Registers callback function for LCU connected event. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">on_connected</td><td>- callback function.</td></tr>
  </table>
  </dd>
</dl>
<p>Registers callback function for LCU connected event. Once callback function is registered and <a class="el" href="classrito_1_1Lcu__websocket__handler.html#a1c56976b4fca8f90a52f8cb0da415b15" title="Starts internal polling loop. Will not return unless stop() is called from another thread.">run()</a> method is called, registered callback will be called every time LCU is found and connected to. Callback is called from the same thread that called <a class="el" href="classrito_1_1Lcu__websocket__handler.html#a1c56976b4fca8f90a52f8cb0da415b15" title="Starts internal polling loop. Will not return unless stop() is called from another thread.">run()</a>.</p>
<p>Registered callback should be non-blocking and should take as little time to execute as possible, as it will be called synchronously. </p>

</div>
</div>
<a id="a6dc6553d33b19d2a14b7106f298137ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6dc6553d33b19d2a14b7106f298137ef">&#9670;&nbsp;</a></span>register_on_disconnected_callback()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void rito::Lcu_websocket_handler::register_on_disconnected_callback </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacerito.html#a1778ee7a785dccf226a5dc2f28a46ccb">Connection_callback</a>&#160;</td>
          <td class="paramname"><em>on_disconnected</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Registers callback function for LCU disconnected event. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">on_disconnected</td><td>- callback function.</td></tr>
  </table>
  </dd>
</dl>
<p>Registers callback function for LCU disconnected event. Once callback function is registered and <a class="el" href="classrito_1_1Lcu__websocket__handler.html#a1c56976b4fca8f90a52f8cb0da415b15" title="Starts internal polling loop. Will not return unless stop() is called from another thread.">run()</a> method is called, registered callback will be called every time LCU is disconnected from. Callback is called from the same thread that called <a class="el" href="classrito_1_1Lcu__websocket__handler.html#a1c56976b4fca8f90a52f8cb0da415b15" title="Starts internal polling loop. Will not return unless stop() is called from another thread.">run()</a>.</p>
<p>Registered callback should be non-blocking and should take as little time to execute as possible, as it will be called synchronously. </p>

</div>
</div>
<a id="a1c56976b4fca8f90a52f8cb0da415b15"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c56976b4fca8f90a52f8cb0da415b15">&#9670;&nbsp;</a></span>run()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void rito::Lcu_websocket_handler::run </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Starts internal polling loop. Will not return unless <a class="el" href="classrito_1_1Lcu__websocket__handler.html#a452edaee138c5ea31fdecffc87fb6463" title="Stops internal loop. Drops LCU connection (if such connection was established).">stop()</a> is called from another thread. </p>
<p>This method runs internal loop, which will keep the connection to the LCU, reconnect if that connection is lost and receive messages. On top of that, if any event handlers are registered (via <a class="el" href="classrito_1_1Lcu__websocket__handler.html#abb2a39aa671ad9a85cc390dc762a114c" title="Registers callback function for message received event.">register_message_callback()</a>, <a class="el" href="classrito_1_1Lcu__websocket__handler.html#a8e3171ae9c3af8deb53ce8c056cd20a1" title="Registers callback function for LCU connected event.">register_on_connected_callback()</a> and <a class="el" href="classrito_1_1Lcu__websocket__handler.html#a6dc6553d33b19d2a14b7106f298137ef" title="Registers callback function for LCU disconnected event.">register_on_disconnected_callback()</a>), callbacks will be called from this thread. If no handlers are registered, all events are discarded.</p>
<p>Internal loop can be stopped by calling <a class="el" href="classrito_1_1Lcu__websocket__handler.html#a452edaee138c5ea31fdecffc87fb6463" title="Stops internal loop. Drops LCU connection (if such connection was established).">stop()</a> from another thread. </p>

</div>
</div>
<a id="a970b9d4977376c471eab08a33dcdee61"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a970b9d4977376c471eab08a33dcdee61">&#9670;&nbsp;</a></span>send_message()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool rito::Lcu_websocket_handler::send_message </td>
          <td>(</td>
          <td class="paramtype">std::string_view&#160;</td>
          <td class="paramname"><em>message</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sends message over websocket to LCU. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">message</td><td>- Message to be sent over websocket. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if message is sent successfully, false otherwise.</dd></dl>
<p>This method should be called only if another thread has called <a class="el" href="classrito_1_1Lcu__websocket__handler.html#a1c56976b4fca8f90a52f8cb0da415b15" title="Starts internal polling loop. Will not return unless stop() is called from another thread.">run()</a>. If <a class="el" href="classrito_1_1Lcu__websocket__handler.html#a1c56976b4fca8f90a52f8cb0da415b15" title="Starts internal polling loop. Will not return unless stop() is called from another thread.">run()</a> was not called, there is no connection to LCU. Messages are not queued.</p>
<p>This method should be called from separate thread. </p>

</div>
</div>
<a id="a452edaee138c5ea31fdecffc87fb6463"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a452edaee138c5ea31fdecffc87fb6463">&#9670;&nbsp;</a></span>stop()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void rito::Lcu_websocket_handler::stop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Stops internal loop. Drops LCU connection (if such connection was established). </p>
<p>This method stops internal loop and drops LCU connection. It should be called from separate thread. If there is no existing loop running (i.e., none of threads called <a class="el" href="classrito_1_1Lcu__websocket__handler.html#a1c56976b4fca8f90a52f8cb0da415b15" title="Starts internal polling loop. Will not return unless stop() is called from another thread.">run()</a>), it does nothing. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>include/rito/<a class="el" href="lcu__websocket__handler_8h_source.html">lcu_websocket_handler.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
